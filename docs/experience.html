<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>تجربیات | همیار</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;800&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Vazirmatn',sans-serif;background:#fdfdfb;color:#2c2c2c;line-height:1.8}
header{background:linear-gradient(135deg,#6fcf97,#56ccf2);color:#fff;padding:20px 40px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
header h1{margin:0;font-size:28px;font-weight:800}
nav a{margin-right:20px;color:#fff;font-weight:600;font-size:16px;text-decoration:none;}
nav a:hover{text-decoration:underline;}

.section{max-width:800px;margin:40px auto;padding:25px;background:#fff;border-radius:25px;box-shadow:0 10px 25px rgba(0,0,0,0.1)}
.section h2{text-align:center;margin-bottom:20px;color:#333}
.section textarea{width:100%;height:100px;padding:12px;border-radius:15px;border:1px solid #ccc;font-size:16px;resize:none}
.section button{background:#f2994a;color:#fff;border:none;padding:12px 25px;border-radius:25px;margin-top:12px;cursor:pointer;font-weight:600;transition:0.3s;font-size:16px}
.section button:hover{transform:scale(1.03)}

.experience-list{margin-top:25px;display:flex;flex-direction:column;gap:20px}
.experience-item{background:#d2f4e8;padding:15px;border-radius:15px;word-wrap:break-word;position:relative;box-shadow:0 5px 15px rgba(0,0,0,0.05);opacity:0;transform:translateY(20px);transition:all 0.4s ease;display:flex;flex-direction:column;gap:10px;}
.experience-item.show{opacity:1;transform:translateY(0);}
.experience-author{font-weight:bold;color:#2c2c2c}
.experience-time{font-size:12px;color:#555}

.like-container{display:flex;align-items:center;gap:8px;margin-top:5px;cursor:pointer;width:max-content}
.like-container span{font-weight:bold;color:#2c2c2c}
.like-container svg{width:20px;height:20px;fill:#ff6b81;transition:transform 0.2s}
.like-container.liked svg{transform:scale(1.3)}

.comment-section{margin-top:10px}
.comment-list{margin-top:10px;display:flex;flex-direction:column;gap:6px}
.comment-item{background:#ffffffaa;padding:8px 12px;border-radius:12px;font-size:14px;color:#2c2c2c}
.comment-form{display:flex;gap:6px;margin-top:10px}
.comment-form input{flex:1;padding:8px;border-radius:12px;border:1px solid #ccc;font-size:14px}
.comment-form button{padding:8px 12px;border:none;border-radius:12px;background:#56ccf2;color:#fff;cursor:pointer;transition:0.3s}
.comment-form button:hover{background:#3aa0e0}
</style>
</head>
<body>

<header>
<h1>همیار</h1>
<nav>
<a href="index.html">خانه</a>
<a href="health.html">سلامت</a>
<a href="memory.html">ذهن و حافظه</a>
<a href="books.html">کتاب‌خوان</a>
<a href="fun.html">سرگرمی</a>
<a href="contact.html">ارتباط</a>
<a href="about.html">درباره ما</a>
<a href="profile.html">پروفایل</a>
</nav>
</header>

<section class="section">
<h2>تجربیات خود را بنویسید</h2>
<textarea id="expInput" placeholder="تجربه خود را بنویسید..."></textarea>
<button onclick="addExperience()">ثبت تجربه</button>

<div class="experience-list" id="expList"></div>
</section>

<script>
// تجربیات نمونه
const sampleExperiences=[
{id:1,author:'فاطمه',text:'هر روز ورزش کوتاه باعث شده حافظه‌ام بهتر بشه و شاداب‌تر باشم.',time:'2 روز پیش',likes:3,comments:['واقعا مفیده!','منم امتحان کردم عالی بود']},
{id:2,author:'حسین',text:'با همیار تونستم دوباره پیاده‌روی روزانه را شروع کنم و انرژی بیشتری دارم.',time:'3 روز پیش',likes:2,comments:['تبریک!','ادامه بده']},
{id:3,author:'زهرا',text:'تمرینات ذهنی خیلی بهم کمک کرد که تمرکزمو تقویت کنم.',time:'5 روز پیش',likes:5,comments:['موافقم','خیلی مفید بود']},
{id:4,author:'امیر',text:'یاد گرفتم چطور روزانه کمی زمان برای مطالعه ذهنی بذارم، حس خوبی داره.',time:'1 هفته پیش',likes:1,comments:['خوبه که شروع کردی']},
{id:5,author:'مریم',text:'تمرینات کوتاه حافظه خیلی مفید بودن و انگیزه‌م رو بیشتر کردن.',time:'4 روز پیش',likes:4,comments:['دقیقا!','انگیزه‌بخش بود']}
];

let nextId=100;

function loadExperiences(){
let storedList=JSON.parse(localStorage.getItem('experiences')||'[]');
let list=[...sampleExperiences,...storedList];
list.sort((a,b)=>b.id-a.id);
const container=document.getElementById('expList');
container.innerHTML='';
list.forEach(exp=>{
createExpElement(exp,container);
});
}

// ساخت کارت تجربه
function createExpElement(exp,container){
const div=document.createElement('div');
div.className='experience-item';
div.dataset.id=exp.id;
div.innerHTML=`
<div class="experience-author">${exp.author}</div>
<div class="experience-text">${exp.text}</div>
<div class="experience-time">${exp.time}</div>
<div class="like-container">
<svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
<span>${exp.likes||0}</span>
</div>
<div class="comment-section">
<div class="comment-list"></div>
<div class="comment-form">
<input type="text" placeholder="نظر خود را بنویسید">
<button>ثبت</button>
</div>
</div>`;
container.appendChild(div);
setTimeout(()=>div.classList.add('show'),50);

// نمایش کامنت‌ها
const commentList=div.querySelector('.comment-list');
(exp.comments||[]).forEach(c=>{
const cdiv=document.createElement('div');
cdiv.className='comment-item';
cdiv.innerText=c;
commentList.appendChild(cdiv);
});

// لایک
const likeDiv=div.querySelector('.like-container');
const likeKey='liked_'+exp.id;
if(localStorage.getItem(likeKey)) likeDiv.classList.add('liked');
likeDiv.onclick=function(){
let likes=parseInt(likeDiv.querySelector('span').innerText);
if(localStorage.getItem(likeKey)){
localStorage.removeItem(likeKey);
likes--;
likeDiv.classList.remove('liked');
}else{
localStorage.setItem(likeKey,'1');
likes++;
likeDiv.classList.add('liked');
}
likeDiv.querySelector('span').innerText=likes;
}

// ثبت کامنت
const input=div.querySelector('.comment-form input');
const btn=div.querySelector('.comment-form button');
btn.onclick=function(){
const val=input.value.trim();
if(!val) return;
const cdiv=document.createElement('div');
cdiv.className='comment-item';
cdiv.innerText=val;
commentList.appendChild(cdiv);
input.value='';

// ذخیره در localStorage
let storedList=JSON.parse(localStorage.getItem('experiences')||'[]');
let found=false;
for(let e of storedList){
if(e.id===exp.id){
e.comments=e.comments||[];
e.comments.push(val);
found=true; break;
}
}
if(!found){
exp.comments=exp.comments||[];
exp.comments.push(val);
storedList.push(exp);
}
localStorage.setItem('experiences',JSON.stringify(storedList));
}
}

// اضافه کردن تجربه جدید
function addExperience(){
const txt=document.getElementById('expInput').value.trim();
if(!txt){alert('لطفاً تجربه خود را وارد کنید'); return;}
const name=localStorage.getItem('userName')||'کاربر ناشناس';
const date=new Date();
const time=`${date.getDate()}/${date.getMonth()+1}/${date.getFullYear()}`;
const newExp={id:nextId++,author:name,text:txt,time:time,likes:0,comments:[]};
let storedList=JSON.parse(localStorage.getItem('experiences')||'[]');
storedList.push(newExp);
localStorage.setItem('experiences',JSON.stringify(storedList));
document.getElementById('expInput').value='';
loadExperiences();
}

window.onload=loadExperiences;
</script>

</body>
</html>